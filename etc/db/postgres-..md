# Postgres 기타.

PGAdmin으로 대시보드를 볼때 주의할 점

외부에서 직접 호출한경우에 트랜젝션이 1개 증가.&#x20;

DB툴에서 사용할때는 그래프도 표시해야하고, 결과도 표시해야 하기 때문에 갯수가 달라짐.



Tuples In의 업데이트갯수 또한 실제 업데이트 문의 갯수와 다르다. 다른 통계 관련된 테이블에 업데이트가 한번더 이뤄지면서 한번 호출할때 +1이 더 되는듯 하다.&#x20;



### 성능

Windows 가 Linux에 비해서 현저하게 느린가?

* 24코어 윈도우 서버에서 구동중인데 CPU 100%를 사용해서 동일 데이터 복제 후 강제로 대량 호출을 해봤지만 정상
* 테스트했던 조건들\
  (CPU 코어갯수 변경, 리눅스 환경변경, Postgres 버전변경등)
* 윈도우가 리눅스보다 느리다는 사실은 맞아도, 일반적인 환경이라면 전혀 문제가 안됨.
* 대량 호출할때 주의점 : primary key Lock 이 걸릴경우에는 CPU 사용률이 높아진다. 왠만하면 Lock이 안걸리는 함수를 호출하거나 쿼리를 작성해서 테스트 해야한다. \
  환경을 잘못셋팅해서 시간만 날리지 말자..

#### 성능 분석결과 Where 절에 함수 사용에 있어서 유의해야 한다.

{% code title="Query 샘플" %}
```
Select * from
where Lower(id) = "user"
```
{% endcode %}

위 쿼리는 특별히 문제가 되는것처럼 보이지 않는다.&#x20;

먄약 전체 데이터가 100만건이라면 Lower 함수가 100만번 호출되는 것이다..



#### 인덱싱을 정확하게 할 필요가 있다.

id, pass 컬럼에  다중컬럼 인덱스를 생성했다면

다음 두개는 인덱싱 처리되지만

* where id = ""&#x20;
* where id = "" and pass =""&#x20;

다음은 인덱싱 처리되지 않는다.

* where pass = ""

그러나   이 현상은 DBMS에 따라서 달라질거라고 생각된다.&#x20;



